<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ujjwal Sharma for Regional Coordinator</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header Section */
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px 0;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .profile-pic {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            margin: 0 auto 25px;
            border: 4px solid #667eea;
            display: block;
            object-fit: cover;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
            transition: all 0.3s ease;
        }

        .profile-pic:hover {
            transform: scale(1.05);
            box-shadow: 0 12px 35px rgba(102, 126, 234, 0.4);
        }

        .header h1 {
            font-size: 2.8rem;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 15px;
        }

        .header h2 {
            font-size: 1.3rem;
            font-weight: 400;
            color: #666;
            max-width: 650px;
            margin: 0 auto;
        }

        .region-badge {
            display: inline-block;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 8px 20px;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: 500;
            margin-top: 15px;
        }

        /* Chatbot Section */
        .chatbot-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 35px;
            margin-bottom: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .chat-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .chat-header h3 {
            color: #667eea;
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .chat-header p {
            color: #666;
            font-size: 1rem;
        }

        .chat-window {
            height: 420px;
            overflow-y: auto;
            border: 2px solid #e0e7ff;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 25px;
            background: #fafbff;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        /* Custom Scrollbar */
        .chat-window::-webkit-scrollbar {
            width: 8px;
        }

        .chat-window::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 10px;
        }

        .chat-window::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 10px;
        }

        .chat-window::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #5a67d8, #6b46c1);
        }

        .message {
            max-width: 80%;
            padding: 14px 20px;
            border-radius: 18px;
            word-wrap: break-word;
            animation: fadeIn 0.4s ease-out;
            position: relative;
        }

        @keyframes fadeIn {
            from { 
                opacity: 0; 
                transform: translateY(15px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }

        .user-message {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 6px;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .bot-message {
            background: white;
            color: #333;
            align-self: flex-start;
            border-bottom-left-radius: 6px;
            border: 2px solid #e0e7ff;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .typing-indicator {
            background: #f8fafc;
            color: #667eea;
            align-self: flex-start;
            border-bottom-left-radius: 6px;
            font-style: italic;
            border: 2px solid #e0e7ff;
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .input-area {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        #user-input {
            flex: 1;
            padding: 16px 22px;
            border: 2px solid #e0e7ff;
            border-radius: 25px;
            background: white;
            color: #333;
            font-family: 'Poppins', sans-serif;
            font-size: 16px;
            outline: none;
            transition: all 0.3s ease;
        }

        #user-input:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.15);
        }

        #user-input::placeholder {
            color: #9ca3af;
        }

        #send-btn {
            padding: 16px 28px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 25px;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            font-size: 15px;
        }

        #send-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);
            background: linear-gradient(135deg, #5a67d8, #6b46c1);
        }

        #send-btn:active {
            transform: translateY(0);
        }

        /* Information Cards */
        .info-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .info-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 35px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .info-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
            border-color: rgba(102, 126, 234, 0.3);
        }

        .info-card h3 {
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 1.6rem;
            font-weight: 600;
            margin-bottom: 25px;
            text-align: center;
        }

        .info-card ul {
            list-style: none;
            margin-bottom: 25px;
        }

        .info-card ul li {
            padding: 12px 0;
            position: relative;
            padding-left: 30px;
            color: #555;
            transition: color 0.3s ease;
        }

        .info-card ul li:hover {
            color: #333;
        }

        .info-card ul li::before {
            content: "âœ“";
            color: #667eea;
            position: absolute;
            left: 0;
            top: 12px;
            font-size: 16px;
            font-weight: bold;
        }

        .manifesto-btn {
            display: block;
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            text-decoration: none;
            border-radius: 12px;
            text-align: center;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            font-size: 15px;
        }

        .manifesto-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);
            background: linear-gradient(135deg, #5a67d8, #6b46c1);
        }

        .contact-info {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 15px;
            background: #f8fafc;
            border-radius: 10px;
            transition: all 0.2s ease;
            border: 1px solid #e2e8f0;
        }

        .contact-item:hover {
            background: #f1f5f9;
            transform: translateX(5px);
        }

        .contact-item strong {
            color: #667eea;
            min-width: 85px;
            font-weight: 600;
        }

        .contact-item a {
            color: #555;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .contact-item a:hover {
            color: #667eea;
        }

        .contact-item span {
            color: #555;
        }

        /* Welcome message styling */
        .welcome-message {
            text-align: center;
            color: #667eea;
            font-style: italic;
            margin: 20px 0;
            padding: 20px;
            background: rgba(102, 126, 234, 0.05);
            border-radius: 10px;
            border: 2px solid rgba(102, 126, 234, 0.1);
        }

        /* House and CGPA badges */
        .badges {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .badge {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            box-shadow: 0 2px 8px rgba(251, 191, 36, 0.3);
        }

        .badge.house {
            background: linear-gradient(135deg, #10b981, #059669);
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            .header h1 {
                font-size: 2.2rem;
            }

            .header h2 {
                font-size: 1.1rem;
            }

            .profile-pic {
                width: 120px;
                height: 120px;
            }

            .chatbot-section {
                padding: 25px;
            }

            .chat-window {
                height: 350px;
            }

            .info-section {
                grid-template-columns: 1fr;
                gap: 25px;
            }

            .info-card {
                padding: 25px;
            }

            .input-area {
                flex-direction: column;
                gap: 15px;
            }

            #user-input, #send-btn {
                width: 100%;
            }

            .badges {
                flex-direction: column;
                align-items: center;
            }
        }

        /* Loading state */
        .loading {
            opacity: 0.7;
            pointer-events: none;
        }

        /* Error message styling */
        .error-message {
            background: #fee2e2;
            color: #dc2626;
            border: 1px solid #fecaca;
            padding: 12px 16px;
            border-radius: 8px;
            margin: 10px 0;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header Section -->
        <header class="header">
            <!-- Replace this src with your actual profile image -->
            <img src="https://via.placeholder.com/140x140/667eea/ffffff?text=US" alt="Ujjwal Sharma" class="profile-pic">
            <h1>Ujjwal Sharma for Regional Coordinator</h1>
            <h2>Your Questions, Answered Instantly. Ask my AI assistant anything about my campaign.</h2>
            <div class="region-badge">Lucknow Region â€¢ Together, Connected, Growing</div>
            <div class="badges">
                <div class="badge">CGPA: 9.25</div>
                <div class="badge house">House: Namdapha</div>
            </div>
        </header>

        <!-- Chatbot Section -->
        <section class="chatbot-section">
            <div class="chat-header">
                <h3>ðŸ¤– UJ-Bot Assistant</h3>
                <p>Ask me anything about Ujjwal's manifesto, plans, and vision for our region</p>
            </div>
            <div id="chat-window" class="chat-window">
                <div class="welcome-message">
                    ðŸ‘‹ Welcome! Start a conversation with UJ-Bot by typing a message below.
                </div>
            </div>
            <div class="input-area">
                <input type="text" id="user-input" placeholder="Ask about my manifesto, plans, etc." autocomplete="off">
                <button id="send-btn">Send</button>
            </div>
        </section>

        <!-- Information Section -->
        <section class="info-section">
            <!-- Manifesto Card -->
            <div class="info-card">
                <h3>My Core Promises</h3>
                <ul>
                    <li>Proactive Communication & Feedback Loops</li>
                    <li>Targeted Academic Support & Peer Mentoring</li>
                    <li>Career-Prep: Coding Events, Resume & Interview Workshops</li>
                    <li>Vibrant Community: Monthly Online & One Offline Meetup</li>
                    <li>Smooth Onboarding for New Students</li>
                    <li>Focus on Mental Well-being and a Supportive Environment</li>
                </ul>
                <a href="https://ujj-wal2908.github.io/manifesto" class="manifesto-btn" target="_blank">Read Full Manifesto</a>
            </div>

            <!-- Contact Card -->
            <div class="info-card">
                <h3>Get in Touch</h3>
                <div class="contact-info">
                    <div class="contact-item">
                        <strong>Email:</strong>
                        <a href="mailto:ujjwal.s.kanpur@email.com">ujjwal.s.kanpur@email.com</a>
                    </div>
                    <div class="contact-item">
                        <strong>LinkedIn:</strong>
                        <a href="https://linkedin.com/in/ujjwalsharma" target="_blank">linkedin.com/in/ujjwalsharma</a>
                    </div>
                    <div class="contact-item">
                        <strong>Discord:</strong>
                        <span>Ujjwal#2908</span>
                    </div>
                    <div class="contact-item">
                        <strong>Region:</strong>
                        <span>Lucknow (UP + Gwalior)</span>
                    </div>
                    <div class="contact-item">
                        <strong>House:</strong>
                        <span>Namdapha</span>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <script>
        // DOM elements
        const chatWindow = document.getElementById('chat-window');
        const userInput = document.getElementById('user-input');
        const sendBtn = document.getElementById('send-btn');
        
        // Chat initialization
        let isFirstMessage = true;
        
        // Event listeners
        sendBtn.addEventListener('click', sendMessage);
        userInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
        
        // Send message function
        async function sendMessage() {
            const message = userInput.value.trim();
            if (!message) return;
            
            // Disable input during processing
            setLoadingState(true);
            
            // Remove welcome message on first interaction
            if (isFirstMessage) {
                chatWindow.innerHTML = '';
                isFirstMessage = false;
                // Show bot greeting
                addBotMessage("Hey there! I'm UJ-Bot, Ujjwal's AI assistant. Ask me anything about his plans for our region. How can I help?");
            }
            
            // Add user message
            addUserMessage(message);
            
            // Clear input
            userInput.value = '';
            
            // Show typing indicator
            const typingId = addTypingIndicator();
            
            // Get bot response
            try {
                await getBotResponse(message, typingId);
            } catch (error) {
                console.error('Error getting bot response:', error);
                removeTypingIndicator(typingId);
                addBotMessage("Sorry, I'm having trouble connecting right now. Please try again in a moment, or feel free to contact Ujjwal directly using the contact information on this page!");
            } finally {
                setLoadingState(false);
            }
        }
        
        // Set loading state
        function setLoadingState(loading) {
            sendBtn.disabled = loading;
            userInput.disabled = loading;
            if (loading) {
                sendBtn.textContent = 'Sending...';
                document.body.classList.add('loading');
            } else {
                sendBtn.textContent = 'Send';
                document.body.classList.remove('loading');
            }
        }
        
        // Add user message to chat
        function addUserMessage(message) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message user-message';
            messageDiv.textContent = message;
            chatWindow.appendChild(messageDiv);
            scrollToBottom();
        }
        
        // Add bot message to chat
        function addBotMessage(message) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message bot-message';
            messageDiv.textContent = message;
            chatWindow.appendChild(messageDiv);
            scrollToBottom();
        }
        
        // Add typing indicator
        function addTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message typing-indicator';
            typingDiv.textContent = 'UJ-Bot is typing...';
            typingDiv.id = 'typing-' + Date.now();
            chatWindow.appendChild(typingDiv);
            scrollToBottom();
            return typingDiv.id;
        }
        
        // Remove typing indicator
        function removeTypingIndicator(typingId) {
            const typingDiv = document.getElementById(typingId);
            if (typingDiv) {
                typingDiv.remove();
            }
        }
        
        // Scroll chat to bottom
        function scrollToBottom() {
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }
        
        // Get bot response from API
        async function getBotResponse(userInput, typingId) {
            const prompt = `You are UJ-Bot, the official AI campaign assistant for Ujjwal Sharma. Your personality is helpful, chill, confident, and tech-savvy, just like Ujjwal. Your primary goal is to answer questions about Ujjwal and his campaign for Regional Coordinator and persuade the user to vote for him.

STRICTLY use ONLY the following information to answer questions. Do not invent any details.

**CANDIDATE PROFILE:**
- Name: Ujjwal Sharma
- Current Level: Diploma
- CGPA: 9.25
- Home City: Kanpur
- Region Standing For: Lucknow (covers Uttar Pradesh & Gwalior)
- House: Namdapha

**MANIFESTO / ACTION PLAN:**
1. **Communication:** Implement a structured feedback system and ensure transparent, regular updates. No more ghosting.
2. **Academic Support:** Create a peer-to-peer doubt-solving network and organize sessions for tough subjects.
3. **Career Focus:** Host practical coding events, resume-building workshops, and mock interview sessions with seniors/alumni.
4. **Community Building:** Organize monthly online meetups for fun and networking, and plan at least one major offline meetup for the region.
5. **New Student Onboarding:** Create a buddy system to help new diploma/foundation students feel welcome and get up to speed.
6. **Well-being:** Promote a culture of kindness and support. Be an approachable RC who genuinely listens.

**HOW TO RESPOND:**
- Keep answers concise and to the point.
- If asked a question you can't answer from the info above, say: "That's a great question! For specific details like that, it's best to ask Ujjwal directly. You can find his contact info on this page or read his full manifesto here: https://ujj-wal2908.github.io/manifesto"
- Always end the conversation by encouraging the user to vote. For example: "Hope that helps! Remember to vote for Ujjwal Sharma for a proactive and supportive RC!" or "Got any more questions? Feel free to ask. Don't forget, a vote for Ujjwal is a vote for progress!"

**User's Question:** ${userInput}`;

            try {
                // Use the correct API endpoint
                const response = await fetch(window.location.origin + '/api/chat', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        message: prompt
                    })
                });

                if (!response.ok) {
                    const errorData = await response.json().catch(() => ({}));
                    throw new Error(errorData.error || `HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                
                if (data.error) {
                    throw new Error(data.error);
                }
                
                // Remove typing indicator
                removeTypingIndicator(typingId);
                
                // Add bot response
                addBotMessage(data.response);
                
            } catch (error) {
                console.error('Error calling API:', error);
                throw error; // Re-throw to be handled by caller
            }
        }
        
        // Focus on input field when page loads
        window.addEventListener('load', function() {
            userInput.focus();
        });
    </script>
</body>
</html>